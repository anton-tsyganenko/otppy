otppy
=====
реализация шифра "одноразовый блокнот", написанная на python

##опции

`-o file` - направить вывод в файл  
`-i flie` - взять данные из файла  
`-ki folder` - взять ключ из папки  
`--imode mode` - режим ввода данных (может быть hex или bin)  
`--omode mode` - режим вывода данных (может быть hex или bin)  
`--gen-key` - генерировать ключи  
`--no-spaces` - не вставлять пробелы в шестнадцатеричный код  
`--do-not-delete-key` - не удалять ключ после использования  

##быстрый старт

1. Создайте папку с ключами командой `./otp.py --gen-key -o keys_folder`. Программа спросит вас количество ключей, которое равно количеству сообщений, которое вы сможете передать и длину ключей, равную максимальной длине сообщения. Не стоит делать эти цифры слишком низкими, чтобы не возникло нехватки ключей или неприятностей от ограничений по длине сообщения. Рекомендую создать 100-10000 ключей размером 100-10000 байт, в зависимости от потребностей. Если создавать слишком много ключей или делать их слишком длинными, могут возникнуть такие проблемы, как долгая генерация/шифрование или большой объем занимаемых данных.
2. Передайте эту папку своему собеседнику по **защищенному** каналу. Перед этим можете упаковать ее в архив без сжатия.
3. Чтобы передать собеседнику сообщение, используйте команду `./otp.py -ki keys_folder`. Введите свое сообщение, после этого нажмите enter а затем ctrl+d. Передайте собеседнику полученный шестнадцатеричный код.
4. Чтобы расшифровать полученное сообщение, используйте команду `./otp.py -ki keys_folder` (да, ее-же). Введите код, после этого нажмите enter а затем ctrl+d.
5. Следите за тем, чтобы ключи не кончились. количество оставшихся сообщений равно количеству файлов в папке с ключами. Если ключей слишком мало, будьте готовы повторить 1 и 2 пункты.

##примеры

геренация папки с ключами:

    ./otp.py --gen-key -o keys

преобразование (шифрование/расшифровывание) с ручным вводом текста и ключа:

    ./otp.py

преобразование с ручным вводом текста и использованием ключа из папки:

    ./otp.py -ki keys

преобразование файла с использованием ключа из папки:

    ./otp.py -ki keys -i file.in -o file.out

для получение текста из шестнадцатеричного кода используйте команду `./otp.py --imode hex --omode bin`, в качестве ключа используйте нули:

    enter the text, then press ENTER; CTRL+D
    68 65 6c 6c 6f 2c 20 70 79 74 68 6f 6e
    enter the key > 00 00 00 00 00 00 00 00 00 00 00 00 00
    ================

    hello, python

##также

* Использованные ключи удаляются из папки. Используйте `--do-not-delete-key`, чтобы предотвратить это.
* Программа не предназначена для шифрования больших файлов. Можно спокойно шифровать маленькие файлы (несколько килобайт), шифрование более крупных файлов (несколько мегабайт) может занять некоторое время, шифрование больших файлов (100 мегабайт и более) может быть **очень** долгим. **Следите, чтобы суммарный размер файла и ключа был меньше свободной оперативной памяти**
* Программа может использоваться в случае, если есть 2 канала, каждый из которых в отдельности может прослушиваться. Тогда надо передавать ключи по одному каналу, а сообщения - по другому. Чтобы расшифровать сообщения, потребуется прослушать оба канала.
* Надежность шифра зависит от безопасности способа передачи ключей. Рекомендуется передавать ключи при личной встрече на флешке или диске. Для большей надежности можно шифровать ключи с помощью truecrypt, зашифрованных zip-архивов и т.д.
* Учтите, что кириллические символы могут занимать больше 1 байта.
* Про шифр Вернама можно [почитать на википедии](http://ru.wikipedia.org/wiki/Шифр_Вернама)
* Если вы заметили ошибку в программе, у вас возникли вопросы или вы хотите предложить какие-то улучшения, не стесняйтесь связаться со мной по [электронной почте](mailto:anton-tsyganenko@yandex.ru) или [jabber](xmpp:antontsyganenko@jabber.ru).
